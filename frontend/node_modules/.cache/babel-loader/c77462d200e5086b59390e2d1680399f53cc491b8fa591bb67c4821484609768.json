{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\omie1\\\\Desktop\\\\AWS react\\\\frontend\\\\src\\\\contexts\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { useUser } from \"@clerk/clerk-react\";\nimport { apiClient } from \"../utils/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  const context = useContext(AuthContext);\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\");\n  }\n  return context;\n};\n_s(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const {\n    user,\n    isLoaded,\n    isSignedIn\n  } = useUser();\n  const [userProfile, setUserProfile] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      if (isLoaded && isSignedIn && user) {\n        try {\n          const response = await apiClient.auth.getProfile();\n          setUserProfile(response.data);\n        } catch (error) {\n          console.error(\"Error fetching user profile:\", error);\n        }\n      }\n      setLoading(false);\n    };\n    fetchUserProfile();\n  }, [isLoaded, isSignedIn, user]);\n  const updateProgress = async progressData => {\n    try {\n      await apiClient.auth.updateProgress(progressData);\n      // Optionally refresh user profile\n      const response = await apiClient.auth.getProfile();\n      setUserProfile(response.data);\n    } catch (error) {\n      console.error(\"Error updating progress:\", error);\n      throw error;\n    }\n  };\n  const value = {\n    user,\n    userProfile,\n    isLoaded,\n    isSignedIn,\n    loading,\n    updateProgress\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 10\n  }, this);\n};\n_s2(AuthProvider, \"lYDjQmBR7VI+gInfgN0RjEzzRdo=\", false, function () {\n  return [useUser];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","_s2","createContext","useContext","useEffect","useState","useUser","apiClient","jsxDEV","_jsxDEV","AuthContext","useAuth","context","Error","AuthProvider","children","user","isLoaded","isSignedIn","userProfile","setUserProfile","loading","setLoading","fetchUserProfile","response","auth","getProfile","data","error","console","updateProgress","progressData","value","Provider","fileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/omie1/Desktop/AWS react/frontend/src/contexts/AuthContext.js"],"sourcesContent":["\"use client\"\n\nimport { createContext, useContext, useEffect, useState } from \"react\"\nimport { useUser } from \"@clerk/clerk-react\"\nimport { apiClient } from \"../utils/api\"\n\nconst AuthContext = createContext()\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext)\n  if (!context) {\n    throw new Error(\"useAuth must be used within an AuthProvider\")\n  }\n  return context\n}\n\nexport const AuthProvider = ({ children }) => {\n  const { user, isLoaded, isSignedIn } = useUser()\n  const [userProfile, setUserProfile] = useState(null)\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const fetchUserProfile = async () => {\n      if (isLoaded && isSignedIn && user) {\n        try {\n          const response = await apiClient.auth.getProfile()\n          setUserProfile(response.data)\n        } catch (error) {\n          console.error(\"Error fetching user profile:\", error)\n        }\n      }\n      setLoading(false)\n    }\n\n    fetchUserProfile()\n  }, [isLoaded, isSignedIn, user])\n\n  const updateProgress = async (progressData) => {\n    try {\n      await apiClient.auth.updateProgress(progressData)\n      // Optionally refresh user profile\n      const response = await apiClient.auth.getProfile()\n      setUserProfile(response.data)\n    } catch (error) {\n      console.error(\"Error updating progress:\", error)\n      throw error\n    }\n  }\n\n  const value = {\n    user,\n    userProfile,\n    isLoaded,\n    isSignedIn,\n    loading,\n    updateProgress,\n  }\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>\n}\n"],"mappings":"AAAA,YAAY;;AAAA,IAAAA,YAAA;EAAAC,EAAA,GAAAC,YAAA;EAAAC,GAAA,GAAAD,YAAA;AAEZ,SAASE,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACtE,SAASC,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,SAAS,QAAQ,cAAc;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAExC,MAAMC,WAAW,gBAAGR,aAAa,CAAC,CAAC;AAEnC,OAAO,MAAMS,OAAO,GAAGA,CAAA,KAAM;EAAAZ,EAAA;EAC3B,MAAMa,OAAO,GAAGT,UAAU,CAACO,WAAW,CAAC;EACvC,IAAI,CAACE,OAAO,EAAE;IACZ,MAAM,IAAIC,KAAK,CAAC,6CAA6C,CAAC;EAChE;EACA,OAAOD,OAAO;AAChB,CAAC;AAAAb,EAAA,CANYY,OAAO;AAQpB,OAAO,MAAMG,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EAAAd,GAAA;EAC5C,MAAM;IAAEe,IAAI;IAAEC,QAAQ;IAAEC;EAAW,CAAC,GAAGZ,OAAO,CAAC,CAAC;EAChD,MAAM,CAACa,WAAW,EAAEC,cAAc,CAAC,GAAGf,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACgB,OAAO,EAAEC,UAAU,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACd,MAAMmB,gBAAgB,GAAG,MAAAA,CAAA,KAAY;MACnC,IAAIN,QAAQ,IAAIC,UAAU,IAAIF,IAAI,EAAE;QAClC,IAAI;UACF,MAAMQ,QAAQ,GAAG,MAAMjB,SAAS,CAACkB,IAAI,CAACC,UAAU,CAAC,CAAC;UAClDN,cAAc,CAACI,QAAQ,CAACG,IAAI,CAAC;QAC/B,CAAC,CAAC,OAAOC,KAAK,EAAE;UACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACtD;MACF;MACAN,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC;IAEDC,gBAAgB,CAAC,CAAC;EACpB,CAAC,EAAE,CAACN,QAAQ,EAAEC,UAAU,EAAEF,IAAI,CAAC,CAAC;EAEhC,MAAMc,cAAc,GAAG,MAAOC,YAAY,IAAK;IAC7C,IAAI;MACF,MAAMxB,SAAS,CAACkB,IAAI,CAACK,cAAc,CAACC,YAAY,CAAC;MACjD;MACA,MAAMP,QAAQ,GAAG,MAAMjB,SAAS,CAACkB,IAAI,CAACC,UAAU,CAAC,CAAC;MAClDN,cAAc,CAACI,QAAQ,CAACG,IAAI,CAAC;IAC/B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,MAAMA,KAAK;IACb;EACF,CAAC;EAED,MAAMI,KAAK,GAAG;IACZhB,IAAI;IACJG,WAAW;IACXF,QAAQ;IACRC,UAAU;IACVG,OAAO;IACPS;EACF,CAAC;EAED,oBAAOrB,OAAA,CAACC,WAAW,CAACuB,QAAQ;IAACD,KAAK,EAAEA,KAAM;IAAAjB,QAAA,EAAEA;EAAQ;IAAAmB,QAAA,EAAApC,YAAA;IAAAqC,UAAA;IAAAC,YAAA;EAAA,OAAuB,CAAC;AAC9E,CAAC;AAAAnC,GAAA,CA3CYa,YAAY;EAAA,QACgBR,OAAO;AAAA;AAAA+B,EAAA,GADnCvB,YAAY;AAAA,IAAAuB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}